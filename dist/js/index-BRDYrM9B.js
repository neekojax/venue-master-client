var x=(n,r,e)=>new Promise((p,c)=>{var m=a=>{try{l(e.next(a))}catch(t){c(t)}},h=a=>{try{l(e.throw(a))}catch(t){c(t)}},l=a=>a.done?p(a.value):Promise.resolve(a.value).then(m,h);l((e=e.apply(n,r)).next())});import{a as g,b as S,j as o}from"./index-D5n0M57a.js";import{m as _,r as u}from"./react-BIszHAjf.js";import{R as j}from"./index-DaMDJGiK.js";import{u as H}from"./useAuthRedirect-D1nqwtme.js";import{a as b}from"./fetchHelper-B3ZRhvca.js";import{h as f,W as P}from"./antd-BlFR_sXc.js";import"./install-YEQ1JyRA.js";import"./install-C0pYAmbF.js";const w=(n,r)=>x(void 0,null,function*(){return yield b(`miningPool/getHashRateHistoryByPoolName/${n}/${r}`)});function B(){H();const{poolName:n}=_(),{poolType:r}=g(S(["poolType"])),[e,p]=u.useState(null),[c,m]=u.useState(!0),h=t=>x(this,null,function*(){var d;try{const i=yield w(t,n);p((d=i==null?void 0:i.data)==null?void 0:d.sort((s,y)=>new Date(s.date)-new Date(y.date)))}catch(i){}finally{m(!1)}});u.useEffect(()=>{h(r)},[r]);const l=()=>{const t=e==null?void 0:e.map(s=>s.date),d=e==null?void 0:e.map(s=>s.hash_rate),i=e==null?void 0:e.map(s=>s.settlement_theoretical_hash);return{tooltip:{trigger:"axis"},legend:{data:["结算算力","理论算力"]},xAxis:{type:"category",data:t,axisLabel:{rotate:45}},yAxis:{type:"value",name:"哈希（PH/s）",nameLocation:"end",nameGap:20},series:[{name:"结算算力",type:"line",data:d,smooth:!0,itemStyle:{color:"#ff5733"},symbol:"none"},{name:"理论算力",type:"line",data:i,smooth:!0,itemStyle:{color:"#33c1ff"},symbol:"none"}]}},a=[{title:"结算日期",dataIndex:"date",key:"date"},{title:"结算算力",dataIndex:"hash_rate",key:"hash_rate",render:t=>o.jsxs("span",{children:[t," PH/s"]})},{title:"理论算力",dataIndex:"settlement_theoretical_hash",key:"settlement_theoretical_hash",render:t=>o.jsxs("span",{children:[t," PH/s"]})},{title:"算力达成率",dataIndex:"hash_completion_rate",key:"hash_completion_rate"}];return o.jsxs("div",{style:{padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},children:[o.jsx("h1",{style:{fontSize:"24px",marginBottom:"10px"},children:n}),o.jsxs("div",{style:{marginTop:"20px"},children:[o.jsx(f,{title:"历史算力曲线",loading:c,children:o.jsx(j,{option:l(),style:{height:"400px",width:"100%"}})}),o.jsx(f,{title:"历史算力数据",style:{marginTop:"20px"},children:o.jsx(P,{dataSource:e==null?void 0:e.slice().reverse(),columns:a,rowKey:"date",pagination:{position:["bottomCenter"],showSizeChanger:!0,pageSizeOptions:["20","30","50"],defaultPageSize:20}})})]})]})}export{B as default};
