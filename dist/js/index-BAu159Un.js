var h=(i,d,l)=>new Promise((o,n)=>{var r=e=>{try{s(l.next(e))}catch(t){n(t)}},m=e=>{try{s(l.throw(e))}catch(t){n(t)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,m);s((l=l.apply(i,d)).next())});import{j as a}from"./index-B9bs-ISz.js";import{r as c}from"./react-BIszHAjf.js";import{E as g}from"./index-Dc9jFIir.js";import{a as y,b as E}from"./excel-35wNsxPv.js";import{P as x,a as p,E as _,f as j}from"./electric-select-B1UJhMFV.js";import"./antd-DyiLpPLO.js";import"./xlsx-DaVhO591.js";import"./useQuery-D_zpbqkF.js";import"./fetchHelper-RfII1d93.js";const f="electric-limit";function v(){const[i,d]=c.useState(localStorage.getItem(`${f}_selectedType`)||x),[l,o]=c.useState([]),[n,r]=c.useState([]);c.useEffect(()=>{i===x?o([{title:"电力接入点",dataIndex:"name",key:"name",width:300},{title:"数据口径",dataIndex:"type",key:"type",width:300},{title:"限电时间范围",dataIndex:"time_range",key:"time_range"},{title:"限电时长",dataIndex:"time_length",key:"time_length",width:100,sorter:(e,t)=>e.time_length-t.time_length,render:e=>a.jsxs("span",{children:[e," ",a.jsx("span",{style:{fontSize:"em"},children:" 分 "})]})}]):i===p&&o([{title:"电力接入点",dataIndex:"name",key:"name",width:100},{title:"限电时间范围",dataIndex:"time_range",key:"time_range",width:100},{title:"限电时长",dataIndex:"time_length",key:"time_length",width:100,sorter:(e,t)=>e.time_length-t.time_length,render:e=>a.jsxs("span",{children:[e," ",a.jsx("span",{style:{fontSize:"em"},children:" 小时 "})]})}])},[i]);const m=e=>h(this,null,function*(){try{if(Object.keys(e.name).length>0&&e.start!=""&&e.end!=""){const t=yield j(e);r(t.data||[])}else r([])}catch(t){console.error("Error fetching settlement data:",t)}}),s=()=>{i===x?y(n):i===p&&E(n)};return a.jsxs("div",{style:{padding:"20px"},children:[a.jsx(_,{selectedType:i,setSelectedType:d,handleSearch:m,onDownload:s,storagePrefix:f}),a.jsx("div",{style:{marginTop:"20px",minWidth:"300px"},children:n.length>0?a.jsx(g,{tableData:n,setTableData:r,columns:l,handleDelete:()=>{},handleSave:()=>{}}):a.jsx("div",{style:{textAlign:"center",marginTop:"60px"},children:a.jsxs("p",{style:{fontSize:"16px"},children:[a.jsx("i",{className:"fas fa-exclamation-circle",style:{marginRight:"8px",color:"#f39c12"}}),"暂无数据, 请选择电网场地搜索数据"]})})})]})}export{v as default};
