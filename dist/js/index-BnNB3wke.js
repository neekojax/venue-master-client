var x=(s,n,t)=>new Promise((p,r)=>{var d=o=>{try{e(t.next(o))}catch(l){r(l)}},m=o=>{try{e(t.throw(o))}catch(l){r(l)}},e=o=>o.done?p(o.value):Promise.resolve(o.value).then(d,m);e((t=t.apply(s,n)).next())});import{a as f,b as h,j as i}from"./index-CNctkCuc.js";import{m as S,r as y}from"./react-BIszHAjf.js";import{R as b}from"./index-CXE9JK-u.js";import{u as _}from"./useAuthRedirect-QbCecRW_.js";import{a as T}from"./fetchHelper-BWEGwfth.js";import{h as g,W as w}from"./antd-CcxI5lPu.js";const j=(s,n)=>x(void 0,null,function*(){return yield T(`miningPool/getIncomeStatisticsHistoryByPoolName/${s}/${n}`)});function z(){var u;_();const{poolName:s}=S(),{poolType:n}=f(h(["poolType"])),[t,p]=y.useState(null),[r,d]=y.useState(!0),m=a=>x(this,null,function*(){try{const c=yield j(a,s);p(c.data)}catch(c){}finally{d(!1)}});y.useEffect(()=>{m(n)},[n]);const e=(u=t==null?void 0:t.data)==null?void 0:u.sort((a,c)=>new Date(a.date)-new Date(c.date)),o={tooltip:{trigger:"axis"},legend:{data:["BTC 收益","USD 收益"]},xAxis:{type:"category",data:e==null?void 0:e.map(a=>a.date)},yAxis:[{type:"value",name:"BTC 收益",position:"left"},{type:"value",name:"USD 收益",position:"right"}],series:[{name:"BTC 收益",type:"line",data:e==null?void 0:e.map(a=>a.income_btc),yAxisIndex:0,symbol:"none"},{name:"USD 收益",type:"line",data:e==null?void 0:e.map(a=>a.income_usd),yAxisIndex:1,symbol:"none"}]},l=[{title:"日期",dataIndex:"date",key:"date"},{title:"BTC 收益",dataIndex:"income_btc",key:"income_btc"},{title:"USD 收益",dataIndex:"income_usd",key:"income_usd"},{title:"托管费用",dataIndex:"hosting_fee",key:"hosting_fee"},{title:"托管比率",dataIndex:"hosting_ratio",key:"hosting_ratio"}];return i.jsxs("div",{style:{padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},children:[i.jsx("h1",{style:{fontSize:"24px",marginBottom:"10px"},children:t==null?void 0:t.pool_name}),i.jsxs("h2",{style:{fontSize:"20px",color:"#555"},children:["历史总收益 (BTC): ",t?t.total_income_btc:0]}),i.jsx(g,{loading:r,title:"历史收益曲线",style:{marginTop:"20px"},children:i.jsx(b,{option:o,style:{height:"400px",width:"100%",marginBottom:"20px"}})}),i.jsx(g,{loading:r,title:"每日收益详情",style:{marginTop:"20px"},children:i.jsx(w,{dataSource:e==null?void 0:e.slice().reverse(),columns:l,rowKey:"date",style:{marginTop:"20px",borderRadius:"8px",overflow:"hidden"},pagination:{position:["bottomCenter"],showSizeChanger:!0,pageSizeOptions:["20","30","50"],defaultPageSize:10}})})]})}export{z as default};
