var x=(l,c,r)=>new Promise((d,n)=>{var s=e=>{try{i(r.next(e))}catch(t){n(t)}},m=e=>{try{i(r.throw(e))}catch(t){n(t)}},i=e=>e.done?d(e.value):Promise.resolve(e.value).then(s,m);i((r=r.apply(l,c)).next())});import{j as a}from"./index-BnuL7sY2.js";import{r as o}from"./react-BIszHAjf.js";import{E as g}from"./index-DhNqwnem.js";import{c as h}from"./excel-35wNsxPv.js";import{P as f,E as y,b as E}from"./electric-select-Bc3YuXr4.js";import"./antd-D8kp0uix.js";import"./xlsx-DaVhO591.js";import"./useQuery-BPbcB6qv.js";import"./fetchHelper-DSZqwLso.js";const p="electric-average";function A(){const[l,c]=o.useState(localStorage.getItem(`${p}_selectedType`)||f),[r,d]=o.useState([]),[n,s]=o.useState([]);o.useEffect(()=>{d([{title:"电力接入点",dataIndex:"name",key:"name",width:100},{title:"数据口径",dataIndex:"type",key:"type",width:80},{title:"时间范围",dataIndex:"time_range",key:"time_range",width:120},{title:"平均电价",dataIndex:"average",key:"average",width:200,sorter:(e,t)=>e.average-t.average,render:e=>a.jsxs("span",{children:[e," ",a.jsx("span",{style:{fontSize:"em"},children:"US$ Cent/KWH"})]})}])},[]);const m=e=>x(this,null,function*(){try{if(Object.keys(e.name).length>0&&e.start!=""&&e.end!=""){const t=yield E(e);s(t.data||[])}else s([])}catch(t){console.error("Error fetching settlement data:",t)}}),i=()=>{h(n)};return a.jsxs("div",{style:{padding:"20px"},children:[a.jsx(y,{selectedType:l,setSelectedType:c,handleSearch:m,onDownload:i,storagePrefix:p}),a.jsx("div",{style:{marginTop:"20px",minWidth:"300px"},children:n.length>0?a.jsx(g,{tableData:n,setTableData:s,columns:r,handleDelete:()=>{},handleSave:()=>{}}):a.jsx("div",{style:{textAlign:"center",marginTop:"60px"},children:a.jsxs("p",{style:{fontSize:"16px"},children:[a.jsx("i",{className:"fas fa-exclamation-circle",style:{marginRight:"8px",color:"#f39c12"}}),"暂无数据, 请选择电网场地搜索数据"]})})})]})}export{A as default};
