var m=(t,l,o)=>new Promise((d,c)=>{var u=e=>{try{a(o.next(e))}catch(r){c(r)}},s=e=>{try{a(o.throw(e))}catch(r){c(r)}},a=e=>e.done?d(e.value):Promise.resolve(e.value).then(u,s);a((o=o.apply(t,l)).next())});import{j as n}from"./index-CHu7xWKI.js";import{r as F}from"./react-BIszHAjf.js";import{a3 as g,B as h,a5 as y,K as x}from"./antd-CcxI5lPu.js";function f({open:t,onCreate:l,onCancel:o,initialValues:d,title:c,FormComponent:u}){const[s,a]=F.useState(),[e,r]=F.useState(!1);return n.jsx(g,{title:c,open:t,destroyOnClose:!0,maskClosable:!1,onCancel:o,confirmLoading:e,okButtonProps:{htmlType:"submit"},cancelButtonProps:{disabled:e},onOk:()=>m(this,null,function*(){try{const i=yield s==null?void 0:s.validateFields();r(!0),yield l(i),s==null||s.resetFields()}catch(i){console.log("Failed:",i)}finally{r(!1)}}),children:n.jsx(u,{initialValues:d,onFormInstanceReady:i=>{a(i)}})})}var j=(t=>(t.ADD="add",t.EDIT="edit",t))(j||{});const w=({label:t,initialValues:l,onSubmit:o,FormComponent:d,mode:c})=>{const[u,s]=F.useState(!1),a=()=>s(!0),e=()=>s(!1),r=i=>m(void 0,null,function*(){try{yield o(i),e()}catch(p){x.error(`${t}失败: ${p.message}`)}});return n.jsxs(n.Fragment,{children:[c==="add"?n.jsx(h,{type:"primary",danger:!0,size:"middle",icon:n.jsx(y,{style:{color:"white"}}),style:{backgroundColor:"#40A9FF",borderColor:"#40A9FF",color:"#FFFFFF"},onClick:a,children:t}):n.jsx(h,{type:"link",size:"small",onClick:a,children:"编辑"}),n.jsx(f,{open:u,initialValues:l,onCreate:r,onCancel:e,title:t,FormComponent:d})]})},A=t=>{if(t.length<=40)return t;const l=t.substring(0,10),o=t.substring(t.length-10);return`${l}...${o}`};export{w as A,j as a,A as g};
