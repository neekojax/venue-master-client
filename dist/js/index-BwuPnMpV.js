import{a as k,b as D,j as e}from"./index-C972zpsd.js";import{r as l}from"./react-BIszHAjf.js";import{a}from"./index-DsO2pSoJ.js";import{F as f,a as y,b as u}from"./index-BkK42E6M.js";import{c as A}from"./index-ChQVlTd2.js";import{G as N}from"./iconBase-DmfS09tz.js";import{E as L}from"./index-C2sBIIhX.js";import{u as B}from"./useAuthRedirect-hAHPGvTZ.js";import{e as E}from"./excel-35wNsxPv.js";import{d as M}from"./hook-BphaF_4u.js";import{z as P,U as r,N as j,O as G,G as O,q as S,I as $,Q as U,B as V,V as q}from"./antd-CcxI5lPu.js";import"./fetchHelper-B7JrY3PJ.js";import"./xlsx-DaVhO591.js";import"./useQuery-CvAjuhrc.js";import"./useMutation-BI2uO9yF.js";function H(o){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M113.844 17.72c-8.426.04-16.812.833-25.094 2.436C195.65 84.503 275.473 170.516 338.47 270c2.526-53.76-19.07-109.13-53.533-154.25-14.097 5.298-31.477.742-43.468-11.25-11.98-11.98-16.558-29.347-11.282-43.438C194.46 34.105 153.68 17.52 113.844 17.72zm380.562 20.405L423.47 115.75l30.06 125.563-55.092 8.78-19.407 80.626 73.5 39.124-41.25 55.937 29.658 44.033-88.782-27.625 16.5-43.844L291.97 364.5l13.124-84.563-111.375 58.125-4.22 78.25-112.22-27.656-33.25 104.156h450.376V38.125zM261.156 58.72c-.388.01-.776.028-1.156.06-3.644.325-6.882 1.696-9.188 4-6.147 6.15-5.746 18.88 3.875 28.5 9.622 9.623 22.353 10.024 28.5 3.876 6.148-6.148 5.747-18.878-3.875-28.5-5.637-5.637-12.335-8.096-18.156-7.937zM196.5 127.593L25.28 298.874c4.273 11.926 11.027 21.05 25.25 25.626L221.97 153c-7.796-8.89-16.308-17.333-25.47-25.406zm158.78 11.625l9.314 84.686 27.437-84.687h-36.75zm-132.03 74.968l-20.156 35.937 92.687 7.375-72.53-43.313z"},child:[]}]})(o)}const J=()=>{const o=localStorage.getItem("timeRange");return console.log("stored",o),o||"all"},Q=()=>{const o=localStorage.getItem("poolFilter");return o||""};function de(){B();const{poolType:o}=k(D(["poolType"])),[p,b]=l.useState(J()),[d,w]=l.useState(Q()),{data:c,error:h,isLoading:m}=M(p,o),[I,v]=l.useState([]),[z,g]=l.useState([]),[x,F]=l.useState("");if(l.useEffect(()=>{if(c&&c.data){const s=c.data.map((t,n)=>({key:t.id,serialNumber:n+1,venue_name:t.mining_pool_info.pool_name,sub_account_name:t.mining_pool_info.pool_name,observer_link:t.mining_pool_info.link,energy_ratio:t.mining_pool_info.energy_ratio,basic_hosting_fee:t.mining_pool_info.basic_hosting_fee,hourly_computing_power:t.hourly_computing_power,total_hosting_fee:t.total_hosting_fee,total_income_btc:t.total_income_btc,total_income_usd:t.total_income_usd,net_income:t.net_income,hosting_fee_ratio:t.hosting_fee_ratio,report_date:t.report_date}));g(s)}},[c]),l.useEffect(()=>{v([{dataIndex:"serialNumber",key:"serialNumber",width:35,render:(s,t)=>{const{observer_link:n}=t;return n.includes("antpool")?e.jsx(f,{style:{color:"green",fontSize:16}}):n.includes("f2pool")?e.jsx(y,{style:{color:"orange",fontSize:16}}):e.jsx("span",{children:t.serialNumber})}},{title:"场地",dataIndex:"venue_name",key:"venue_name",width:"20%",render:s=>e.jsx(P,{title:s,placement:"top",overlayInnerStyle:{color:"white"},style:{color:"white"},children:e.jsx("div",{style:{width:"100%",overflow:"hidden",color:"#333",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s})})},{title:"24h平均算力",dataIndex:"hourly_computing_power",key:"hourly_computing_power",width:"25%",sorter:(s,t)=>s.hourly_computing_power-t.hourly_computing_power,render:s=>e.jsxs("span",{children:[s," ",e.jsxs("span",{className:"text-sm text-gray-500",style:{fontSize:"em"},children:[" ","TH/s"]})]})},{title:"收益(BTC/USD/净USD)",dataIndex:"total_income_btc",key:"total_income_btc",width:"33.33%",sorter:(s,t)=>s.total_income_btc-t.total_income_btc,render:(s,t)=>e.jsxs("span",{children:[e.jsx(r,{color:"#f50",children:s}),e.jsx(r,{color:"#2db7f5",children:t.total_income_usd}),e.jsx(r,{color:"#87d068",children:t.net_income})]})},{title:"托管费(基础/能耗比)",dataIndex:"energy_ratio",key:"energy_ratio",width:"25%",render:(s,t)=>e.jsxs("span",{children:[e.jsxs(r,{color:"gold",children:[t.basic_hosting_fee," $/kwh"]}),e.jsxs(r,{color:"green",children:[s," J/T"]})]})},{title:"总托管费",dataIndex:"hosting_fee_ratio",key:"hosting_fee_ratio",width:"15%",render:(s,t)=>e.jsxs("span",{children:[e.jsx("span",{style:{display:"none"},children:s}),e.jsx("span",{style:{color:"#3498DB"},children:t.total_hosting_fee}),e.jsx("span",{className:"text-sm text-gray-500",children:" usd"})]})},{title:"托管费占比",dataIndex:"hosting_fee_ratio",key:"hosting_fee_ratio",width:"15%",sorter:(s,t)=>{const n=parseFloat(s.hosting_fee_ratio.replace("%","")),i=parseFloat(t.hosting_fee_ratio.replace("%",""));return n-i},render:s=>e.jsx("span",{style:{color:"green"},children:s})},{title:"收益日期",dataIndex:"report_date",key:"report_date",width:100,sorter:(s,t)=>new Date(s.report_date).getTime()-new Date(t.report_date).getTime(),render:s=>{const t=new Date(s),n=t.getMonth()+1,i=t.getDate();return`${n}-${i}`}}])},[]),m)return e.jsx(j,{tip:"加载中..."});if(h)return e.jsx(G,{message:"错误",description:h.message,type:"error",showIcon:!0});const R=s=>{b(s),localStorage.setItem("timeRange",s)},C=s=>{F(s.target.value)},T=s=>{w(s)},_=z.filter(s=>{const t=Object.values(s).some(i=>String(i).toLowerCase().includes(x.toLowerCase())),n=d?s.observer_link.includes(d):!0;return t&&n});return e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs(O,{size:24,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(H,{style:{fontSize:"20px",color:"#1890ff",marginRight:"16px"}}),e.jsx(S,{placeholder:"选择池",style:{width:180,height:32},className:"text-xs",size:"small",onChange:T,options:[{value:"",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(u,{style:{color:"green",fontSize:14,marginRight:8}})," 全部"]})},{value:"antpool",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(f,{style:{color:"green",fontSize:14,marginRight:8}})," 蚂蚁矿池"]})},{value:"f2pool",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(y,{style:{color:"#252F4A",fontSize:14,marginRight:8}})," 鱼池"]})}],value:d})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(A,{style:{fontSize:"20px",color:"#1890ff",marginRight:"16px"}}),e.jsx(S,{placeholder:"选择时间",style:{width:180,height:32},size:"small",onChange:R,options:[{value:"all",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(u,{style:{color:"green",fontSize:14,marginRight:8}})," 全部"]})},{value:"1days",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(a,{style:{color:"#252F4A",fontSize:14,marginRight:8}})," 一天"]})},{value:"3days",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(a,{style:{color:"#252F4A",fontSize:14,marginRight:8}})," 三天"]})},{value:"7days",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(a,{style:{color:"#252F4A",fontSize:14,marginRight:8}})," 一周"]})},{value:"1month",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(a,{style:{color:"#252F4A",fontSize:14,marginRight:8}})," 一个月"]})},{value:"3month",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(a,{style:{color:"#252F4A",fontSize:14,marginRight:8}})," 三个月"]})},{value:"6month",label:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx(a,{style:{color:"#252F4A",fontSize:14,marginRight:8}})," 半年"]})}],value:p})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx($,{prefix:e.jsx(U,{style:{color:"rgba(0, 0, 0, 0.25)",fontSize:18}}),placeholder:"请输入搜索字段",value:x,onChange:C,style:{width:250},className:"text-sm mr-10"}),e.jsx(V,{icon:e.jsx(q,{className:"exportIcon"}),size:"middle",className:"text-blue-500 exportButton",onClick:()=>E(_),children:"导出"})]})]}),m?e.jsx(j,{style:{marginTop:20}}):e.jsx(L,{tableData:_,setTableData:g,columns:I,handleDelete:()=>{},handleSave:()=>{}})]})}export{de as default};
