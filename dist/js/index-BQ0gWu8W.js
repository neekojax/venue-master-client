var G=(r,t,n)=>new Promise((i,d)=>{var u=l=>{try{c(n.next(l))}catch(a){d(a)}},s=l=>{try{c(n.throw(l))}catch(a){d(a)}},c=l=>l.done?i(l.value):Promise.resolve(l.value).then(u,s);c((n=n.apply(r,t)).next())});import{j as h,a as Q,b as X}from"./index-Db3b42ci.js";import{e as tt,r as O}from"./react-BIszHAjf.js";import{u as M,w as et}from"./xlsx-DaVhO591.js";import{a as at}from"./api-DCKWcvxO.js";import{j as nt,k as rt,h as it,Z as ot,q as st,B as lt,be as ut,W as ct,z as W,U as $}from"./antd-CcxI5lPu.js";import"./fetchHelper-Di1jlnjM.js";var B={},z={exports:{}};(function(r,t){(function(n,i){i(t)})(tt,function(n){var i=function(){return i=Object.assign||function(u){for(var s,c=1,l=arguments.length;c<l;c++)for(var a in s=arguments[c])Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a]);return u},i.apply(this,arguments)},d=function(){function u(s,c,l){var a=this;this.endVal=c,this.options=l,this.version="2.8.1",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(f){a.startTime||(a.startTime=f);var y=f-a.startTime;a.remaining=a.duration-y,a.useEasing?a.countDown?a.frameVal=a.startVal-a.easingFn(y,0,a.startVal-a.endVal,a.duration):a.frameVal=a.easingFn(y,a.startVal,a.endVal-a.startVal,a.duration):a.frameVal=a.startVal+(a.endVal-a.startVal)*(y/a.duration);var g=a.countDown?a.frameVal<a.endVal:a.frameVal>a.endVal;a.frameVal=g?a.endVal:a.frameVal,a.frameVal=Number(a.frameVal.toFixed(a.options.decimalPlaces)),a.printValue(a.frameVal),y<a.duration?a.rAF=requestAnimationFrame(a.count):a.finalEndVal!==null?a.update(a.finalEndVal):a.options.onCompleteCallback&&a.options.onCompleteCallback()},this.formatNumber=function(f){var y,g,S,F,V=f<0?"-":"";y=Math.abs(f).toFixed(a.options.decimalPlaces);var v=(y+="").split(".");if(g=v[0],S=v.length>1?a.options.decimal+v[1]:"",a.options.useGrouping){F="";for(var C=3,R=0,j=0,I=g.length;j<I;++j)a.options.useIndianSeparators&&j===4&&(C=2,R=1),j!==0&&R%C==0&&(F=a.options.separator+F),R++,F=g[I-j-1]+F;g=F}return a.options.numerals&&a.options.numerals.length&&(g=g.replace(/[0-9]/g,function(E){return a.options.numerals[+E]}),S=S.replace(/[0-9]/g,function(E){return a.options.numerals[+E]})),V+a.options.prefix+g+S+a.options.suffix},this.easeOutExpo=function(f,y,g,S){return g*(1-Math.pow(2,-10*f/S))*1024/1023+y},this.options=i(i({},this.defaults),l),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(c),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof s=="string"?document.getElementById(s):s,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window!="undefined"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,s):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return a.handleScroll(a)}),window.onscroll=function(){window.onScrollFns.forEach(function(f){return f()})},this.handleScroll(this)))}return u.prototype.handleScroll=function(s){if(s&&window&&!s.once){var c=window.innerHeight+window.scrollY,l=s.el.getBoundingClientRect(),a=l.top+window.pageYOffset,f=l.top+l.height+window.pageYOffset;f<c&&f>window.scrollY&&s.paused?(s.paused=!1,setTimeout(function(){return s.start()},s.options.scrollSpyDelay),s.options.scrollSpyOnce&&(s.once=!0)):(window.scrollY>f||a>c)&&!s.paused&&s.reset()}},u.prototype.determineDirectionAndSmartEasing=function(){var s=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>s;var c=s-this.startVal;if(Math.abs(c)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=s;var l=this.countDown?1:-1;this.endVal=s+l*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=s,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},u.prototype.start=function(s){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),s&&(this.options.onCompleteCallback=s),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},u.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},u.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},u.prototype.update=function(s){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(s),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},u.prototype.printValue=function(s){var c;if(this.el){var l=this.formattingFn(s);!((c=this.options.plugin)===null||c===void 0)&&c.render?this.options.plugin.render(this.el,l):this.el.tagName==="INPUT"?this.el.value=l:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=l:this.el.innerHTML=l}},u.prototype.ensureNumber=function(s){return typeof s=="number"&&!isNaN(s)},u.prototype.validateValue=function(s){var c=Number(s);return this.ensureNumber(c)?c:(this.error="[CountUp] invalid start or end value: ".concat(s),null)},u.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},u}();n.CountUp=d})})(z,z.exports);var dt=z.exports;Object.defineProperty(B,"__esModule",{value:!0});var x=O,ht=dt;function ft(r,t){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var i,d,u,s,c=[],l=!0,a=!1;try{if(u=(n=n.call(r)).next,t!==0)for(;!(l=(i=u.call(n)).done)&&(c.push(i.value),c.length!==t);l=!0);}catch(f){a=!0,d=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(a)throw d}}return c}}function H(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),n.push.apply(n,i)}return n}function U(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(i){gt(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function pt(r,t){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function mt(r){var t=pt(r,"string");return typeof t=="symbol"?t:String(t)}function gt(r,t,n){return t=mt(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function L(){return L=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},L.apply(this,arguments)}function yt(r,t){if(r==null)return{};var n={},i=Object.keys(r),d,u;for(u=0;u<i.length;u++)d=i[u],!(t.indexOf(d)>=0)&&(n[d]=r[d]);return n}function Y(r,t){if(r==null)return{};var n=yt(r,t),i,d;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(d=0;d<u.length;d++)i=u[d],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(n[i]=r[i])}return n}function wt(r,t){return vt(r)||ft(r,t)||bt(r,t)||xt()}function vt(r){if(Array.isArray(r))return r}function bt(r,t){if(r){if(typeof r=="string")return q(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(r,t)}}function q(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=r[n];return i}function xt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var St=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?x.useLayoutEffect:x.useEffect;function T(r){var t=x.useRef(r);return St(function(){t.current=r}),x.useCallback(function(){for(var n=arguments.length,i=new Array(n),d=0;d<n;d++)i[d]=arguments[d];return t.current.apply(void 0,i)},[])}var Rt=function(t,n){var i=n.decimal,d=n.decimals,u=n.duration,s=n.easingFn,c=n.end,l=n.formattingFn,a=n.numerals,f=n.prefix,y=n.separator,g=n.start,S=n.suffix,F=n.useEasing,V=n.useGrouping,v=n.useIndianSeparators,C=n.enableScrollSpy,R=n.scrollSpyDelay,j=n.scrollSpyOnce,I=n.plugin;return new ht.CountUp(t,c,{startVal:g,duration:u,decimal:i,decimalPlaces:d,easingFn:s,formattingFn:l,numerals:a,separator:y,prefix:f,suffix:S,plugin:I,useEasing:F,useIndianSeparators:v,useGrouping:V,enableScrollSpy:C,scrollSpyDelay:R,scrollSpyOnce:j})},Ft=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],Et={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},J=function(t){var n=Object.fromEntries(Object.entries(t).filter(function(m){var P=wt(m,2),b=P[1];return b!==void 0})),i=x.useMemo(function(){return U(U({},Et),n)},[t]),d=i.ref,u=i.startOnMount,s=i.enableReinitialize,c=i.delay,l=i.onEnd,a=i.onStart,f=i.onPauseResume,y=i.onReset,g=i.onUpdate,S=Y(i,Ft),F=x.useRef(),V=x.useRef(),v=x.useRef(!1),C=T(function(){return Rt(typeof d=="string"?d:d.current,S)}),R=T(function(m){var P=F.current;if(P&&!m)return P;var b=C();return F.current=b,b}),j=T(function(){var m=function(){return R(!0).start(function(){l==null||l({pauseResume:I,reset:E,start:e,update:A})})};c&&c>0?V.current=setTimeout(m,c*1e3):m(),a==null||a({pauseResume:I,reset:E,update:A})}),I=T(function(){R().pauseResume(),f==null||f({reset:E,start:e,update:A})}),E=T(function(){R().el&&(V.current&&clearTimeout(V.current),R().reset(),y==null||y({pauseResume:I,start:e,update:A}))}),A=T(function(m){R().update(m),g==null||g({pauseResume:I,reset:E,start:e})}),e=T(function(){E(),j()}),o=T(function(m){u&&(m&&E(),j())});return x.useEffect(function(){v.current?s&&o(!0):(v.current=!0,o())},[s,v,o,c,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.formattingFn]),x.useEffect(function(){return function(){E()}},[E]),{start:e,pauseResume:I,reset:E,update:A,getCountUp:R}},Vt=["className","redraw","containerProps","children","style"],jt=function(t){var n=t.className,i=t.redraw,d=t.containerProps,u=t.children,s=t.style,c=Y(t,Vt),l=x.useRef(null),a=x.useRef(!1),f=J(U(U({},c),{},{ref:l,startOnMount:typeof u!="function"||t.delay===0,enableReinitialize:!1})),y=f.start,g=f.reset,S=f.update,F=f.pauseResume,V=f.getCountUp,v=T(function(){y()}),C=T(function(I){t.preserveValue||g(),S(I)}),R=T(function(){if(typeof t.children=="function"&&!(l.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}V()});x.useEffect(function(){R()},[R]),x.useEffect(function(){a.current&&C(t.end)},[t.end,C]);var j=i&&t;return x.useEffect(function(){i&&a.current&&v()},[v,i,j]),x.useEffect(function(){!i&&a.current&&v()},[v,i,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.className,t.formattingFn]),x.useEffect(function(){a.current=!0},[]),typeof u=="function"?u({countUpRef:l,start:y,reset:g,update:S,pauseResume:F,getCountUp:V}):x.createElement("span",L({className:n,ref:l,style:s},d),typeof t.start!="undefined"?V().formattingFn(t.start):"")},It=B.default=jt;B.useCountUp=J;const Ot=({data:r})=>h.jsx(nt,{gutter:[16,16],children:r.map((t,n)=>h.jsx(rt,{xs:12,sm:8,md:6,lg:6,children:h.jsxs(it,{bordered:!0,style:{borderRadius:8,textAlign:"center"},children:[h.jsx("div",{style:{fontSize:14,color:"#888"},children:t.title}),h.jsxs("div",{style:{fontSize:28,fontWeight:600,margin:"8px 0"},children:[h.jsx(It,{end:t.value,duration:1.5,separator:",",decimals:t.decimals}),t.unit]})]})},n))}),Mt=()=>{const{poolType:r}=Q(X(["poolType"])),t=O.useRef(null),[n,i]=O.useState(!1);O.useEffect(()=>{const e=()=>{if(t.current){const o=t.current.getBoundingClientRect().top;i(o<=0)}};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const d=new Date;d.setDate(d.getDate()-1);const u=d.toISOString().split("T")[0],[s,c]=O.useState([]),[l,a]=O.useState(u),[f,y]=O.useState([]),g=e=>{y(e)},[S,F]=O.useState([]),[V,v]=O.useState([]),[C,R]=O.useState([]),[j,I]=O.useState(20),E=[{title:"场地名",dataIndex:"venueName",key:"venueName",fixed:"left",width:200,render:e=>{const o=e==="Arct-HF01-J XP-AR-US"||e==="ARCT Technologies-HF02-AR-US";return h.jsx(W,{title:e,placement:"top",overlayInnerStyle:{color:"white"},style:{color:"white"},children:h.jsxs("div",{style:{width:"100%",overflow:"hidden",color:o?"red":"#333",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:o?"bold":"normal"},children:[o&&h.jsx($,{color:"red",style:{marginLeft:2},children:"补充"}),e]})})},sorter:(e,o)=>e.venueName.localeCompare(o.venueName),defaultSortOrder:"ascend"},{title:"账户名",dataIndex:"accountName",key:"accountName",fixed:"left",width:170,render:(e,o)=>{const m=o.ownerType===0?h.jsx($,{color:"blue",style:{padding:"0px 2px"},children:"自营"}):h.jsx($,{color:"green",style:{padding:"0px 2px"},children:"客户"});return h.jsxs(h.Fragment,{children:[`${e}`,"  ",m]})}},{title:"24小时产出(BTC)",dataIndex:"btcOutput24h",key:"btcOutput24h",width:165,align:"right",render:e=>e.toFixed(8),sorter:(e,o)=>e.btcOutput24h-o.btcOutput24h},{title:"理论算力(E)",dataIndex:"theoreticalPower",key:"theoreticalPower",width:125,align:"right",render:e=>e.toFixed(6),sorter:(e,o)=>e.theoreticalPower-o.theoreticalPower},{title:"24小时算力(E)",dataIndex:"power24h",key:"power24h",width:145,align:"right",render:e=>e.toFixed(6),sorter:(e,o)=>e.power24h-o.power24h},{title:"24小时有效率",dataIndex:"effectiveRate24h",key:"effectiveRate24h",width:140,align:"right",render:e=>`${e.toFixed(2)}%`,sorter:(e,o)=>e.effectiveRate24h-o.effectiveRate24h},{title:"托管台数",dataIndex:"totalMachines",key:"totalMachines",width:105,align:"right",render:e=>e.toLocaleString(),sorter:(e,o)=>e.totalMachines-o.totalMachines},{title:"在线数",dataIndex:"onlineMachines",key:"onlineMachines",width:100,align:"right"},{title:"在线率",dataIndex:"onlineRatio",key:"onlineRatio",width:100,align:"right",render:e=>h.jsx("span",{children:`${e}%`})},{title:"总故障台数",dataIndex:"totalFailures",key:"totalFailures",width:120,align:"right",render:e=>h.jsx("span",{children:e}),sorter:(e,o)=>e.totalFailures-o.totalFailures},{title:"总故障率",dataIndex:"totalFailures",key:"totalMachines",width:100,align:"right",render:(e,o)=>{if(Number(o.totalMachines)===0)return h.jsx("span",{children:"0%"});const m=(e/o.totalMachines*100).toFixed(2);return h.jsx("span",{children:`${m}%`})}},{title:"24小时故障数",dataIndex:"failures24h",key:"failures24h",width:138,align:"right",render:e=>e.toLocaleString(),sorter:(e,o)=>e.failures24h-o.failures24h},{title:"24小时故障率",dataIndex:"failureRate24h",key:"failureRate24h",width:138,render:e=>({children:`${e.toFixed(2)}%`,props:{style:{color:e>20?"#ff4d4f":"inherit"}}}),sorter:(e,o)=>e.failureRate24h-o.failureRate24h},{title:"影响算力(E)",dataIndex:"powerImpact",key:"powerImpact",width:130,align:"right",render:e=>e.toFixed(6),sorter:(e,o)=>e.powerImpact-o.powerImpact},{title:"影响占比",dataIndex:"impactRatio",key:"impactRatio",width:105,render:e=>`${e.toFixed(2)}%`,sorter:(e,o)=>e.impactRatio-o.impactRatio},{title:"影响产出(BTC)",dataIndex:"outputImpact",key:"outputImpact",width:145,align:"right",render:e=>e.toFixed(8),sorter:(e,o)=>e.outputImpact-o.outputImpact},{title:"限电影响",dataIndex:"limitImpactRate",key:"limitImpactRate",width:140,align:"right",render:e=>`${e.toFixed(2)}%`,sorter:(e,o)=>e.limitImpactRate-o.limitImpactRate},{title:"高温影响",dataIndex:"highTemperatureRate",key:"highTemperatureRate",width:140,align:"right",render:e=>`${e.toFixed(2)}%`,sorter:(e,o)=>e.highTemperatureRate-o.highTemperatureRate},{title:"事件描述",dataIndex:"events",key:"events",width:400,render:e=>h.jsx(W,{title:e,children:h.jsx("div",{className:"line-clamp-2",children:e})})}];O.useEffect(()=>{G(void 0,null,function*(){const o=Array.isArray(l)?l[0]:l;try{const m=yield at(r,o);if(m&&m.data&&m.data.dailyReportStatistics){const P=m.data.dailyReportStatistics,b=m.data.summary;let _=b.totalFailures24h/b.totalMachines,p=b.totalPowerImpact=b.totalTheoreticalPower;const k=[{title:"平均有效率",value:`${b.averageEffectiveRate.toFixed(2)}`,unit:"%",decimals:2,change:"+1.5%"},{title:"理论算力",value:`${b.totalTheoreticalPower.toFixed(2)}`,unit:"PH/s",decimals:2,change:"+3.2%"},{title:"托管台数",value:`${b.totalMachines}`,unit:"台",decimals:0,change:"+2.3%"},{title:"在线率",value:`${b.totalOnlineRatio.toFixed(2)}`,unit:"%",decimals:2,change:"+0.8%"},{title:"影响占比",value:`${p.toFixed(2)}`,unit:"%",decimals:2,change:"-0.6%"},{title:"总故障率",value:`${_.toFixed(2)}`,unit:"%",decimals:2,change:"+0.2%"},{title:"限电占比",value:`${b.totalLimitImpactRatio.toFixed(2)}`,unit:"%",decimals:2,change:"+0.8%"},{title:"高温占比",value:`${b.totalHighTemperatureImpactRatio.toFixed(2)}`,unit:"%",decimals:2,change:"+0.3%"}];c(k);const D=Object.keys(P).map(N=>{const w=P[N];return{key:N,venueName:w.venue_name,accountId:w.account_id,accountName:w.account_name,ownerType:w.owner_type,btcOutput24h:w.btcOutput24h||0,theoreticalPower:w.theoreticalPower||0,power24h:w.power24h||0,effectiveRate24h:w.effectiveRate24h||0,totalMachines:w.totalMachines||0,totalFailures:w.totalFailures||0,onlineMachines:w.onlineMachines||0,onlineRatio:w.onlineRatio||0,failures24h:w.failures24h||0,failureRate24h:w.failureRate24h||0,powerImpact:w.powerImpact||0,impactRatio:w.impactRatio||0,outputImpact:w.outputImpact||0,limitImpactRate:w.limitImpactRate||0,highTemperatureRate:w.highTemperatureRate||0,events:w.events||""}});F(D),v(D);const K=D.map(N=>({value:N.accountName,label:N.accountName})),Z=Array.from(new Map(K.map(N=>[N.value,N])).values());R(Z)}else console.error("API 返回的 dailyReportStatistics 无效:",m)}catch(m){console.error("获取日报数据失败:",m)}})},[l,r]),O.useEffect(()=>{if(f.length>0){console.log(f);const e=S.filter(o=>f.includes(o.accountName));v(e.sort((o,m)=>o.accountName.localeCompare(m.accountName)))}else v(S.sort((e,o)=>e.accountName.localeCompare(o.accountName)))},[f,S]);const A=()=>{const e=V.map(p=>({场地名:p.venueName,账户名:p.accountName,账户类型:p.ownerType===0?"自营":"客户","24小时产出（BTC）":p.btcOutput24h.toFixed(8),"理论算力（E）":p.theoreticalPower.toFixed(6),"24小时算力（E）":p.power24h.toFixed(8),"24小时有效率":p.effectiveRate24h.toFixed(2)+"%",托管台数:p.totalMachines.toLocaleString(),在线数:p.onlineMachines.toLocaleString(),在线率:p.onlineRatio+"%",总故障台数:p.totalFailures.toLocaleString(),总故障率:Number(p.totalFailures)>0&&Number(p.totalMachines)>0?(Number(p.totalFailures)/Number(p.totalMachines)*100).toFixed(2)+"%":"0%","24小时故障数":p.failures24h.toLocaleString(),"24小时故障率":p.failureRate24h.toFixed(2)+"%","影响算力（E）":p.powerImpact.toFixed(8),影响占比:p.impactRatio.toFixed(2)+"%","影响产出（BTC）":p.outputImpact.toFixed(8),限电影响:p.limitImpactRate+"%",高温影响:p.highTemperatureRate+"%",限电算力:(p.theoreticalPower*1e6*p.limitImpactRate/100).toFixed(2)+"Th/s",高温算力:(p.theoreticalPower*1e6*p.highTemperatureRate/100).toFixed(2)+"Th/s",事件描述:p.events})),o=M.json_to_sheet(e),m=M.book_new(),P={fill:{fgColor:{rgb:"00BFFF"}},font:{color:{rgb:"FFFFFF"},bold:!0}},b=o["!ref"];if(b){const p=M.decode_range(b);for(let k=p.s.c;k<=p.e.c;k++){const D=M.encode_cell({r:0,c:k});o[D]&&(o[D].s=P)}}const _=[{wch:30},{wch:20},{wch:20},{wch:20},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:20},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:50}];o["!cols"]=_,M.book_append_sheet(m,o,"运营日报"),et(m,`运营日报_${l}.xlsx`)};return h.jsxs("div",{className:"min-h-screen",children:[h.jsxs("div",{className:"mx-auto",children:[h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:["运营日报",h.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:[" (",l||u,")"]})]}),h.jsx(ot,{className:"w-40",placeholder:"选择日期",onChange:(e,o)=>{a(o)}})]}),h.jsx(Ot,{data:s})]}),h.jsxs("div",{ref:t,style:{borderRadius:"3px"},className:`mb-6 border-radius-3  rounded-lg bg-white p-6 shadow-sm transition-all duration-300 ${n?"sticky top-0 z-10":""}`,children:[h.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[h.jsx(st,{mode:"multiple",size:"middle",placeholder:"选择账户",style:{minWidth:"200px"},options:C,onChange:g,maxTagCount:3}),h.jsx(lt,{type:"primary",icon:h.jsx(ut,{}),onClick:A,className:"!rounded-button",children:"导出报表"})]}),h.jsx(ct,{columns:E,dataSource:V,scroll:{x:1500},sticky:!0,pagination:{pageSize:j,showSizeChanger:!0,onShowSizeChange:e=>{I(e)},showQuickJumper:!0,showTotal:e=>`共 ${e} 条`},className:"custom-table"})]})]}),h.jsx("style",{children:`
        .ant-table-wrapper {
          height: 100%;
          overflow: auto;
        }

        .ant-table {
          height: 100%;
        }

        .custom-table .ant-table-thead > tr > th {
          background-color: rgba(250, 250, 252, 1);
          font-weight: 600;
        }

        /* .custom-table .ant-table-tbody > tr:hover > td {
        //   background-color: #f0f7ff;
        // }

        // .custom-table .ant-table-tbody > tr:nth-child(even) {
        //   background-color: #fafafa;
        // }*/

        .line-clamp-2 {
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
      `})]})};export{Mt as default};
