var w=(c,t,h)=>new Promise((s,g)=>{var p=f=>{try{m(h.next(f))}catch(b){g(b)}},j=f=>{try{m(h.throw(f))}catch(b){g(b)}},m=f=>f.done?s(f.value):Promise.resolve(f.value).then(p,j);m((h=h.apply(c,t)).next())});import{j as e,R as z,a as M,b as $}from"./index-BeETTzBE.js";import{u as F}from"./useAuthRedirect-Hs_9QWk1.js";import{r as d,u as C}from"./react-BIszHAjf.js";import{a as B,B as E,f as T}from"./api-Bh_fcmM1.js";import{h as N,j as y,k as a,x as u,d as W,y as v,z as A,E as k,v as S,P as _,H as I,J as G}from"./antd-BlFR_sXc.js";import{a as H,f as O,b as U,c as Y,d as J}from"./api-rsHMqaxP.js";import{F as q,a as K}from"./index-ChQVlTd2.js";import"./index-BTyXktSz.js";import{R}from"./index-C8xA3vBV.js";import{L}from"./install-C0pYAmbF.js";import{a as Q}from"./index-DRzIODhC.js";import"./fetchHelper-CMzXq8r_.js";import"./iconBase-DmfS09tz.js";import"./install-YEQ1JyRA.js";import"./install-BOc5fSoi.js";const V=({poolType:c})=>{const[t,h]=d.useState(null),[s,g]=d.useState(!0),[p]=d.useState(null),[j,m]=d.useState(null),f=o=>{const i=Number(o);return isNaN(i)?"":i.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},b=C(),x=()=>{b(z.profitDetail)},l=o=>w(void 0,null,function*(){try{const i=yield H(o);h(i.data)}catch(i){}finally{g(!1)}}),n=o=>w(void 0,null,function*(){try{const i=W().subtract(1,"day").format("YYYY-MM-DD"),r=yield O(o,i);m(r.data),localStorage.setItem("suanlilv",JSON.stringify(r.data))}catch(i){}finally{g(!1)}});return d.useEffect(()=>{l(c),n(c)},[c]),p?e.jsx("div",{children:p}):e.jsxs(N,{className:"card-wapper",title:e.jsxs(y,{align:"middle",children:[e.jsx(a,{children:e.jsx(B,{style:{fontSize:"24px",marginRight:"8px",fontWeight:"bold",color:"#1890ff"}})}),e.jsx(a,{children:e.jsx("h3",{style:{marginLeft:0,fontSize:"18px"},children:"效益"})})]}),loading:s,bordered:!1,extra:e.jsx("span",{onClick:x,style:{cursor:"pointer",display:"flex",alignItems:"center",fontSize:"14px",color:"rgba(0, 0, 0, 0.45)",transition:"color 0.3s ease"},onMouseEnter:o=>o.currentTarget.style.color="#40a9ff",onMouseLeave:o=>o.currentTarget.style.color="#1890ff",children:e.jsx(E,{style:{marginLeft:"8px"}})}),children:[e.jsxs(y,{gutter:24,children:[e.jsx(a,{span:12,children:e.jsx(u,{title:"昨日总收益",value:`${f(t==null?void 0:t.last_day_income_statistics.income_btc)}`,valueStyle:{fontSize:"20px",fontWeight:"bold",color:"#3dbb32"},suffix:"BTC"})}),e.jsx(a,{span:12,children:e.jsx(u,{title:"昨日产出效率",value:`${j==null?void 0:j.BTCOutputPerEPower}`,valueStyle:{fontSize:"16px",fontWeight:"600"},suffix:"BTC/EH"})}),e.jsx(a,{span:12,style:{marginTop:"25px"},children:e.jsx(u,{title:`${t==null?void 0:t.month}月产出数量`,value:`${f(t==null?void 0:t.month_statistics.income_btc)} BTC`,valueStyle:{fontSize:"16px",fontWeight:"bold"}})}),e.jsx(a,{span:12,style:{marginTop:"25px"},children:e.jsx(u,{title:`${t==null?void 0:t.month}月产出价值`,value:`${f(t==null?void 0:t.month_statistics.income_usd)} $`,valueStyle:{fontSize:"16px",fontWeight:"bold"}})}),e.jsx(a,{span:12,style:{marginTop:"25px"},children:e.jsx(u,{title:`${t==null?void 0:t.month}月托管+运维`,value:`${f(t==null?void 0:t.month_statistics.hosting_fee)} $`,valueStyle:{fontSize:"16px",fontWeight:"bold"}})})]}),e.jsxs(y,{style:{marginTop:"25px"},gutter:24,children:[e.jsx(a,{span:6,style:{paddingLeft:"10px"},children:e.jsx(u,{title:"昨日平均托管费占比",value:t==null?void 0:t.last_day_hosting_fee_ratio,valueStyle:{fontSize:"16px",fontWeight:"bold"}})}),e.jsx(a,{span:6,style:{borderLeft:"1px solid #f0f0f0",paddingLeft:"10px"},children:e.jsx(u,{title:"昨日最高托管费占比",value:t==null?void 0:t.max_last_day_custody_ratio,valueStyle:{fontSize:"16px",fontWeight:"bold"},suffix:"%"})}),e.jsx(a,{span:6,style:{borderLeft:"1px solid #f0f0f0",paddingLeft:"10px"},children:e.jsx(u,{title:`${t==null?void 0:t.month}月托管费占比`,value:t==null?void 0:t.month_hosting_fee_ratio,valueStyle:{fontSize:"16px",fontWeight:"bold"}})}),e.jsx(a,{span:6,style:{borderLeft:"1px solid #f0f0f0",paddingLeft:"10px"},children:e.jsx(u,{title:"最高场地近14天平均托管费占比",value:(t==null?void 0:t.max_last_2week_custody_ratio)+"%",valueStyle:{fontSize:"16px",fontWeight:"bold"}})})]})]})},X=({poolType:c})=>{const[t,h]=d.useState([]),[s,g]=d.useState("30"),[p,j]=d.useState(!0),m=x=>w(void 0,null,function*(){try{const o=(yield T(c,x)).data.map(i=>({time:i.time,income_usd:i.income_usd,hosting_fee:i.hosting_fee,fee_percentage:i.fee_percentage})).sort((i,r)=>new Date(i.time)-new Date(r.time));h(o),h(o)}catch(l){console.error("Error fetching hash rate efficiency:",l)}finally{j(!1)}});d.useEffect(()=>{m(s)},[c]);const f=()=>{const x=t.map(r=>r.time),l=t.map(r=>r.income_usd),n=t.map(r=>r.hosting_fee),o=t.map(r=>r.fee_percentage),i=r=>r>=1e8?(r/1e8).toFixed(2)+"亿":r>=1e6?(r/1e6).toFixed(2)+"百万":r>=1e4?(r/1e4).toFixed(2)+"万":r.toFixed(2);return{tooltip:{trigger:"axis"},grid:{top:"5%",right:"5%",bottom:"12%",left:"10%"},xAxis:{type:"category",data:x,boundaryGap:!1,axisLabel:{color:"#99a1b7",fontSize:12,rotate:0,formatter:function(r){return r.substr(5)}},axisLine:{lineStyle:{color:"#99a1b7"}}},yAxis:[{type:"value",name:"收入/托管费",min:0,axisLabel:{color:"#99a1b7",fontSize:12,formatter:function(r){return i(r)}},splitLine:{show:!1}},{type:"value",name:"费用百分比 (%)",min:0,max:100,splitLine:{show:!1},position:"right"}],series:[{name:"收入(USD)",type:"line",data:l,smooth:!0,itemStyle:{color:"#4b9bdc"},areaStyle:{color:new L(0,0,0,1,[{offset:0,color:"rgba(75, 155, 220, 0.4)"},{offset:1,color:"rgba(75, 155, 220,0.03)"}])},lineStyle:{width:3},showSymbol:!1},{name:"托管费",type:"line",data:n,smooth:!0,itemStyle:{color:"#ff6f61"},areaStyle:{color:new L(0,0,0,1,[{offset:0,color:"rgba(255,111,97, 0.4)"},{offset:1,color:"rgba(255,111,97,0.03)"}])},lineStyle:{width:3},showSymbol:!1},{name:"费用百分比",type:"line",yAxisIndex:1,data:o,smooth:!0,itemStyle:{color:"#f0ad4e"},areaStyle:{color:new L(0,0,0,1,[{offset:0,color:"rgba(240,173,78, 0.4)"},{offset:1,color:"rgba(240,173,78,0.03)"}])},lineStyle:{width:3},showSymbol:!1}]}},b=x=>{const l=x.target.value;g(l),m(l)};return e.jsx(N,{className:"card-wapper",bordered:!1,loading:p,title:e.jsxs(y,{align:"middle",children:[e.jsx(a,{children:e.jsx(q,{style:{fontSize:"20px",marginRight:"5px"}})}),e.jsx(a,{children:e.jsx("h3",{style:{marginLeft:2,fontSize:"18px",color:"#333"},children:"收益+支出"})})]}),extra:e.jsxs(v.Group,{value:s,onChange:b,style:{fontSize:"10px",border:"none"},size:"small",className:"filter-button",children:[e.jsx(v.Button,{value:"7",className:`radio-button ${s==="7"?"active":""}`,children:"7天"}),e.jsx(v.Button,{value:"30",className:`radio-button ${s==="30"?"active":""}`,children:"30天"}),e.jsx(v.Button,{value:"90",className:`radio-button ${s==="90"?"active":""}`,children:"90天"})]}),children:e.jsx(R,{option:f(),style:{height:285}})})},Z=({poolType:c})=>{const[t,h]=d.useState([]),[s,g]=d.useState(!0),[p,j]=d.useState("30"),m=x=>w(void 0,null,function*(){var l;try{const i=((l=(yield U(c,x)).data)==null?void 0:l.map(r=>({date:r.date,efficiency:r.efficiency}))).sort((r,D)=>new Date(r.date)-new Date(D.date));h(i)}catch(n){console.error("Error fetching hash rate efficiency:",n)}finally{g(!1)}});d.useEffect(()=>{m(p)},[c]);const f=()=>{const x=t.map(n=>n.date),l=t.map(n=>n.efficiency);return{tooltip:{trigger:"axis"},grid:{top:"5%",right:"5%",bottom:"12%",left:"5%"},xAxis:{type:"category",data:x,boundaryGap:!1,axisLabel:{color:"#99a1b7",fontSize:12,rotate:0,formatter:function(n){return n.substr(5)}},axisLine:{lineStyle:{color:"#99a1b7"}}},yAxis:{type:"value",min:0,axisLabel:{color:"#99a1b7",fontSize:12},lineStyle:{type:"dashed",color:"#99a1b7"},splitLine:{show:!1}},series:[{type:"line",data:l,smooth:!0,itemStyle:{color:"#4b9bdc"},areaStyle:{color:new L(0,0,0,1,[{offset:0,color:"rgba(75, 155, 220, 0.4)"},{offset:1,color:"rgba(75, 155, 220,0.03)"}])},lineStyle:{width:3},showSymbol:!1}]}},b=x=>{const l=x.target.value;j(l),m(l)};return e.jsx(N,{bordered:!1,className:"card-wapper",loading:s,title:e.jsxs(y,{align:"middle",children:[e.jsx(a,{children:e.jsx(K,{style:{fontSize:"24px",marginRight:"8px",fontWeight:"bold",color:"#1890ff"}})}),e.jsx(a,{children:e.jsx("h3",{style:{marginLeft:2,fontSize:"18px",color:"#333"},children:"算力达成率"})})]}),extra:e.jsxs(v.Group,{value:p,className:"filter-button",onChange:b,style:{fontSize:"10px"},size:"small",children:[e.jsx(v.Button,{value:"7",className:`radio-button ${p==="7"?"active":""}`,children:"7天"}),e.jsx(v.Button,{value:"30",className:`radio-button ${p==="30"?"active":""}`,children:"30天"}),e.jsx(v.Button,{value:"90",className:`radio-button ${p==="90"?"active":""}`,children:"90天"})]}),children:e.jsx(R,{option:f(),style:{height:312}})})},P={"0%":"#87d068","100%":"#108ee9"},ee=({poolType:c})=>{const[t,h]=d.useState(null),[s,g]=d.useState(null),[p,j]=d.useState(!0),[m]=d.useState(null),f=C(),b=()=>{f(z.hashDetail)},x=n=>w(void 0,null,function*(){try{const o=yield Y(n);h(o.data);const i=yield J(n);g(i.data)}catch(o){g({last24HourEfficiency:"N/A",lastWeekEfficiency:"N/A",lastMonth:"N/A",lastMonthEfficiency:"N/A",last2Month:"N/A",last2MonthEfficiency:"N/A"}),h({totalCurrentHashRate:0,totalMasterCurrentHashrate:0,totalBackUpCurrentHashrate:0,realTimeHashEfficiency:"N/A"})}finally{j(!1)}});if(d.useEffect(()=>{x(c)},[c]),m)return e.jsx("div",{children:m});const l=n=>n>0?e.jsxs("span",{style:{color:"green"},children:[e.jsx(I,{style:{color:"green"}}),"+ ",n.toFixed(2),"%"]}):n<0?e.jsxs("span",{style:{color:"red"},children:[e.jsx(G,{style:{color:"red"}}),n.toFixed(2),"%"]}):"";return e.jsxs(N,{className:"card-wapper",title:e.jsxs(y,{align:"middle",children:[e.jsx(a,{children:e.jsx(Q,{style:{fontSize:"24px",marginRight:"8px",fontWeight:"bold",color:"#1890ff"}})}),e.jsx(a,{children:e.jsx("h3",{style:{marginLeft:2,fontSize:"18px",color:"#333"},children:"效率"})})]}),loading:p,bordered:!1,extra:e.jsx("span",{onClick:b,style:{cursor:"pointer",display:"flex",alignItems:"center",fontSize:"14px",color:"rgba(0, 0, 0, 0.45)",transition:"color 0.3s ease"},onMouseEnter:n=>n.currentTarget.style.color="#40a9ff",onMouseLeave:n=>n.currentTarget.style.color="#1890ff",children:e.jsx(E,{style:{marginLeft:"8px"}})}),children:[e.jsxs(y,{gutter:24,children:[e.jsx(a,{span:8,children:e.jsx(u,{title:"实时总算力",className:"text-gray-500 fw-semibold",style:{fontSize:"12px"},value:t==null?void 0:t.totalCurrentHashRate,suffix:e.jsxs("span",{style:{fontSize:"16px",color:"gray",fontWeight:"normal"},children:["PH/s",e.jsx(A,{title:e.jsxs(e.Fragment,{children:["主矿池算力: ",t==null?void 0:t.totalMasterCurrentHashrate," PH/s",e.jsx("br",{}),"备用矿池算力: ",t==null?void 0:t.totalBackUpCurrentHashrate," PH/s"]}),children:e.jsx(k,{style:{fontSize:"12px",marginLeft:"8px",cursor:"pointer"}})})]}),valueStyle:{fontSize:"22px",fontWeight:"bold"}})}),e.jsx(a,{span:8,children:e.jsx(u,{title:"理论算力",className:"fs-6 text-gray-500 fw-semibold",value:t==null?void 0:t.totalTheoreticalHashrate,suffix:e.jsx("span",{style:{fontSize:"16px",color:"gray",fontWeight:"normal"},children:"PH/s"}),valueStyle:{fontSize:"20px",fontWeight:"bold"}})}),e.jsx(a,{span:8,style:{borderLeft:"1px solid #f0f0f0",paddingLeft:"16px"},children:e.jsx(u,{title:"实时算力达成率",className:"fs-6 text-gray-500 fw-semibold",value:t==null?void 0:t.realTimeHashEfficiency,valueStyle:{fontSize:"20px",fontWeight:"bold",color:"#3dbb32"},suffix:"%"})})]}),e.jsxs(y,{style:{marginTop:"48px"},gutter:16,children:[e.jsx(a,{span:12,children:e.jsx(S,{gap:"middle",vertical:!0,children:[{title:"昨日算力达成率",color:"red",value:s==null?void 0:s.last24HourEfficiency,diff:s==null?void 0:s.last24HourEfficiencyDiff},{title:`${s==null?void 0:s.lastMonth}月算力达成率`,color:"#09f119",diff:s==null?void 0:s.lastMonthEfficiencyDiff,value:s==null?void 0:s.lastMonthEfficiency}].map((n,o)=>e.jsx(S,{justify:"space-between",align:"center",children:e.jsxs(y,{style:{background:"#f9fafb",padding:"0.625rem",borderRadius:"0.375rem",width:"100%",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5);"},children:[e.jsx(a,{span:12,children:e.jsx("span",{className:"text-gray-500 fs-8 fw-semibold",children:n.title})}),e.jsx(a,{span:12,style:{textAlign:"right"},children:e.jsx("span",{className:"text-gray-500 fs-8 fw-semibold",children:l(n.diff)})}),e.jsx(a,{span:24,children:e.jsxs("span",{className:"text-gray-800 fs-4 fw-bold",children:[n.value,"%"]})}),e.jsx(a,{span:24,children:e.jsx(_,{percent:Number(n.value)||0,status:"active",strokeColor:n.color,style:{flex:1},percentPosition:{align:"start",type:"outer"},size:"small"})})]})},o))})}),e.jsx(a,{span:12,children:e.jsx(S,{gap:"middle",vertical:!0,children:[{title:"近一周平均算力达成率",color:P,value:s==null?void 0:s.lastWeekEfficiency,diff:s==null?void 0:s.lastWeekEfficiencyDiff},{title:`${s==null?void 0:s.last2Month}月算力达成率`,value:s==null?void 0:s.last2MonthEfficiency,diff:s==null?void 0:s.last2MonthEfficiencyDiff}].map((n,o)=>e.jsx(S,{justify:"space-between",align:"center",children:e.jsxs(y,{style:{background:"#f9fafb",padding:"0.625rem",borderRadius:"0.375rem",width:"100%"},children:[e.jsx(a,{span:12,children:e.jsx("span",{className:"text-gray-500 fs-8 fw-semibold",children:n.title})}),e.jsx(a,{span:12,style:{textAlign:"right"},children:e.jsx("span",{className:"text-gray-500 fs-8 fw-semibold",children:l(n.diff)})}),e.jsx(a,{span:24,children:e.jsxs("span",{className:"text-gray-800 fs-4 fw-bold",children:[n.value,"%"]})}),e.jsx(a,{span:24,children:e.jsx(_,{percent:Number(n.value)||0,status:"active",strokeColor:n.color,style:{flex:1},percentPosition:{align:"start",type:"outer"},size:"small"})})]})},o))})})]})]})};function ue(){F();const{poolType:c}=M($(["poolType"]));return e.jsxs("div",{children:[e.jsxs(y,{gutter:24,style:{marginTop:"16px"},children:[e.jsx(a,{xs:24,sm:24,md:12,children:e.jsx(ee,{poolType:c})}),e.jsx(a,{xs:24,sm:24,md:12,children:e.jsx(Z,{poolType:c})})]}),e.jsxs(y,{gutter:24,style:{marginTop:"12px"},children:[e.jsx(a,{xs:24,sm:24,md:12,children:e.jsx(V,{poolType:c})}),e.jsx(a,{xs:24,sm:24,md:12,children:e.jsx(X,{poolType:c})})]})]})}export{ue as default};
