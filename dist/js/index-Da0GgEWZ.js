import{j as e}from"./index-CSV4XiKE.js";import{r as l}from"./react-BIszHAjf.js";import"./index-BlJ-5gRZ.js";import{bk as $,bl as S,bm as p,bf as d,bn as D,y,bo as M,u as o,B as m,O as g,bp as E,bq as A,z as L,X as F,br as z,bs as O}from"./antd-qZ2UPrev.js";import{d as B,L as T}from"./install-DJKZGxT7.js";import"./install-DLPvrVJV.js";const V=()=>{const[n,x]=l.useState(!0),h=l.useRef([]),f=[{title:"理论台数",value:"1,280 台",description:"满负荷运行中",icon:e.jsx(E,{className:"text-gray-400"})},{title:"故障总台数",value:"18 台",description:"需要检修",textColor:"text-yellow-500",icon:e.jsx(A,{className:"text-gray-400"})},{title:"理论算力",value:"1,286 PH/s",description:"标准水平",icon:e.jsx(d,{className:"text-gray-400"})},{title:"24 小时算力",value:"1,265 PH/s",description:"较昨日下降 1.2%",textColor:"text-yellow-500",trendIcon:e.jsx(L,{className:"mr-1"}),icon:e.jsx(F,{className:"text-gray-400"})}],j=[{title:"故障占比",value:"1.4%",description:"一般水平",icon:e.jsx(z,{className:"text-gray-400"})},{title:"高温占比",value:"0.6%",description:"正常范围",icon:e.jsx(p,{className:"text-gray-400"})},{title:"限电占比",value:"0.5%",description:"正常范围",icon:e.jsx(d,{className:"text-gray-400"})},{title:"其他占比",value:"0.3%",description:"正常范围",icon:e.jsx(O,{className:"text-gray-400"})}],[c,u]=l.useState([{id:"hashrate-chart",title:"算力有效率变化曲线",period:"day"},{id:"failure-chart",title:"故障率变化曲线",period:"day"},{id:"temperature-chart",title:"高温影响曲线",period:"day"},{id:"power-chart",title:"限电影响曲线",period:"day"}]),N=a=>{const t=a==="day"?30:12;return a==="day"?Array.from({length:t},(r,s)=>{const i=new Date;return i.setDate(i.getDate()-s),i.toLocaleDateString("zh-CN")}).reverse():Array.from({length:t},(r,s)=>{const i=new Date;return i.setMonth(i.getMonth()-s),`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`}).reverse()},b=(a,t)=>{const r={animation:!1,tooltip:{trigger:"axis"},xAxis:{type:"category",data:t},yAxis:{type:"value"},series:[{type:"line",smooth:!0,data:[],lineStyle:{color:"#2563eb"},areaStyle:{color:new T(0,0,0,1,[{offset:0,color:"rgba(37, 99, 235, 0.2)"},{offset:1,color:"rgba(37, 99, 235, 0)"}])}}]},s=r.series[0];switch(a){case"hashrate-chart":r.yAxis={min:95,max:100},s.data=t.map(()=>Number((95+Math.random()*5).toFixed(1)));break;case"failure-chart":r.yAxis={min:0,max:3},s.data=t.map(()=>Number((Math.random()*2).toFixed(1))),s.lineStyle.color="#dc2626";break;case"temperature-chart":r.yAxis={min:0,max:1},s.data=t.map(()=>Number((Math.random()*.5).toFixed(2))),s.lineStyle.color="#ea580c";break;case"power-chart":r.yAxis={min:0,max:2},s.data=t.map(()=>Number((Math.random()*1.5).toFixed(1))),s.lineStyle.color="#7c3aed";break}return r},v=()=>{const a={};c.forEach((t,r)=>{const s=h.current[r];if(s){const i=B(s),C=N(t.period);i.setOption(b(t.id,C)),a[t.id]=i}}),window.addEventListener("resize",()=>{Object.values(a).forEach(t=>t.resize())})};l.useEffect(()=>{v()},[]);const I=[{title:"日期",dataIndex:"date",key:"date"},{title:"收益 (¥)",dataIndex:"income",key:"income",align:"right"},{title:"算力有效率",dataIndex:"hashrateEfficiency",key:"hashrateEfficiency",align:"right"},{title:"故障率",dataIndex:"failureRate",key:"failureRate",align:"right"},{title:"限电影响",dataIndex:"powerLimit",key:"powerLimit",align:"right"},{title:"高温影响",dataIndex:"temperatureImpact",key:"temperatureImpact",align:"right"}],w=[{title:"场地",dataIndex:"site",key:"site"},{title:"影响时长",dataIndex:"duration",key:"duration"},{title:"时间范围",dataIndex:"timeRange",key:"timeRange"},{title:"事件类型",dataIndex:"eventType",key:"eventType"},{title:"影响台数",dataIndex:"affectedMachines",key:"affectedMachines",align:"right"},{title:"影响算力",dataIndex:"hashrateImpact",key:"hashrateImpact",align:"right"},{title:"时间原因",dataIndex:"reason",key:"reason"}],k=[{key:"1",date:"2024-01-20",income:"286,521",hashrateEfficiency:"98.6%",failureRate:"1.4%",powerLimit:"0.8%",temperatureImpact:"0.2%"}],R=[{key:"1",site:"杭州滨江矿场",duration:"2小时",timeRange:"2025-08-19 14:00-16:00",eventType:"电力故障",affectedMachines:"126台",hashrateImpact:"-1.8%",reason:"变电站检修时间"}];return e.jsxs("div",{className:" mx-auto  min-h-screen",children:[e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"杭州滨江矿场"}),e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-md",children:"矿工号: MW-2025-086"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"text-primary"}),e.jsx("span",{className:"text-gray-600",children:"浙江省杭州市滨江区长河街道长江路258号"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"text-primary"}),e.jsx("span",{className:"text-gray-600",children:"2025-08-19 星期二"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"text-primary"}),e.jsx("span",{className:"text-gray-600",children:"当前温度: 26°C"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"text-primary"}),e.jsx("span",{className:"text-gray-600",children:"当前湿度: 65%"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-100 rounded-xl p-8 mb-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-6 text-gray-800 pl-2",children:"算力运行状态"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border-2 border-primary",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"算力有效率"}),e.jsx(D,{className:"text-primary text-xl"})]}),e.jsx("div",{className:"text-3xl font-bold text-primary",children:"98.6%"}),e.jsxs("div",{className:"text-sm text-green-500 mt-2",children:[e.jsx(y,{className:"mr-1"})," 较昨日提升 0.3%"]})]}),f.map((a,t)=>e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:a.title}),a.icon]}),e.jsx("div",{className:"text-2xl font-semibold",children:a.value}),e.jsxs("div",{className:`text-sm ${a.textColor||"text-gray-500"} mt-2`,children:[a.trendIcon,a.description]})]},t))]})]}),e.jsxs("div",{className:"bg-gray-100 rounded-xl p-8 mb-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-6 text-gray-800 pl-2",children:"算力影响分析"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border-2 border-primary",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"算力影响"}),e.jsx(M,{className:"text-primary text-xl"})]}),e.jsx("div",{className:"text-3xl font-bold text-primary",children:"-2.8%"}),e.jsxs("div",{className:"text-sm text-red-500 mt-2",children:[e.jsx(y,{className:"mr-1"}),"影响增加 0.5%"]})]}),j.map((a,t)=>e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:a.title}),a.icon]}),e.jsx("div",{className:"text-2xl font-semibold",children:a.value}),e.jsx("div",{className:"text-sm text-gray-500 mt-2",children:a.description})]},t))]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:c.map((a,t)=>e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:a.title}),e.jsxs(o.Group,{value:a.period,onChange:r=>{const s=[...c];s[t].period=r.target.value,u(s)},size:"small",children:[e.jsx(o.Button,{value:"day",children:"日"}),e.jsx(o.Button,{value:"month",children:"月"})]})]}),e.jsx("div",{ref:r=>h.current[t]=r,style:{height:300}})]},t))}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:n?"primary":"default",onClick:()=>x(!0),children:"经营日报"}),e.jsx(m,{type:n?"default":"primary",onClick:()=>x(!1),children:"异常事件"})]}),e.jsx(m,{type:"primary",children:"查看更多"})]}),n?e.jsx(g,{columns:I,dataSource:k,pagination:!1,rowKey:"key"}):e.jsx(g,{columns:w,dataSource:R,pagination:!1,rowKey:"key"})]})]})};export{V as default};
