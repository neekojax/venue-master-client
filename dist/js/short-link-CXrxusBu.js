var m=(t,l,o)=>new Promise((d,c)=>{var u=e=>{try{r(o.next(e))}catch(a){c(a)}},s=e=>{try{r(o.throw(e))}catch(a){c(a)}},r=e=>e.done?d(e.value):Promise.resolve(e.value).then(u,s);r((o=o.apply(t,l)).next())});import{j as n}from"./index-CqA4ASv0.js";import{r as F}from"./react-BIszHAjf.js";import{$ as g,B as h,a1 as y,E as x}from"./antd-BGKwBPu3.js";function f({open:t,onCreate:l,onCancel:o,initialValues:d,title:c,FormComponent:u}){const[s,r]=F.useState(),[e,a]=F.useState(!1);return n.jsx(g,{title:c,open:t,destroyOnClose:!0,maskClosable:!1,onCancel:o,confirmLoading:e,okButtonProps:{htmlType:"submit"},cancelButtonProps:{disabled:e},onOk:()=>m(this,null,function*(){try{const i=yield s==null?void 0:s.validateFields();a(!0),yield l(i),s==null||s.resetFields()}catch(i){console.log("Failed:",i)}finally{a(!1)}}),children:n.jsx(u,{initialValues:d,onFormInstanceReady:i=>{r(i)}})})}var j=(t=>(t.ADD="add",t.EDIT="edit",t))(j||{});const $=({label:t,initialValues:l,onSubmit:o,FormComponent:d,mode:c})=>{const[u,s]=F.useState(!1),r=()=>s(!0),e=()=>s(!1),a=i=>m(void 0,null,function*(){try{yield o(i),e()}catch(p){x.error(`${t}失败: ${p.message}`)}});return n.jsxs(n.Fragment,{children:[c==="add"?n.jsx(h,{type:"primary",danger:!0,size:"middle",icon:n.jsx(y,{style:{color:"white"}}),style:{backgroundColor:"#40A9FF",borderColor:"#40A9FF",color:"#FFFFFF"},onClick:r,children:t}):n.jsx(h,{type:"link",size:"small",onClick:r,children:"编辑"}),n.jsx(f,{open:u,initialValues:l,onCreate:a,onCancel:e,title:t,FormComponent:d})]})},k=t=>{if(t.length<=40)return t;const l=t.substring(0,10),o=t.substring(t.length-10);return`${l}...${o}`};export{$ as A,j as a,k as g};
