import{a as R,b as A,j as a}from"./index-DXu8C7s_.js";import{r as n}from"./react-BIszHAjf.js";import{F as D,a as B}from"./index-BkK42E6M.js";import{G as N}from"./iconBase-DmfS09tz.js";import{E as L}from"./index-BHE76hqn.js";import{u as P}from"./useAuthRedirect-DmXu3Mzd.js";import{g as $}from"./excel-35wNsxPv.js";import{d as E}from"./hook-BTway-zg.js";import{z as d,U as o,N as x,j as H,k as f,y as h,I as z,Q as M,B as O,V as U}from"./antd-Cncqk0Hi.js";import"./fetchHelper-D6Tovvwz.js";import"./xlsx-DaVhO591.js";import"./useQuery-I01f_wvN.js";import"./useMutation-DIq0k3T1.js";import"./api-CfKpi9Xi.js";function W(i){return N({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M10.05,17.55c0,0.3,0.09,0.55,0.26,0.73c0.2,0.19,0.46,0.28,0.79,0.28c0.3,0,0.55-0.09,0.73-0.28l6.04-6.05v1.95
	c0,0.3,0.1,0.55,0.3,0.75c0.2,0.2,0.45,0.3,0.75,0.3c0.29,0,0.54-0.1,0.74-0.31s0.3-0.45,0.3-0.75V9.7c0-0.3-0.1-0.55-0.3-0.75
	s-0.45-0.3-0.74-0.3h-4.5c-0.29,0-0.54,0.1-0.73,0.3S13.4,9.39,13.4,9.7c0,0.29,0.1,0.54,0.29,0.73s0.44,0.29,0.73,0.29h1.95
	l-6.06,6.06C10.14,16.99,10.05,17.25,10.05,17.55z`},child:[]}]})(i)}const g="mining-hash";function ne(){P();const{poolType:i}=R(A(["poolType"])),[p,y]=n.useState(localStorage.getItem(`${g}_poolCategory`)||"主矿池"),{data:l,isLoading:u}=E(i,p),[v,j]=n.useState([]),[w,c]=n.useState([]),[_,S]=n.useState("");n.useEffect(()=>{if(l&&l.data){const t=l.data.map((e,s)=>({serialNumber:s+1,venue_name:e.venue_name,pool_name:e.pool_name,current_hash:e.current_hash,online:e.online,offline:e.offline,last_hash:e.last_hash,last_settlement_hash:e.last_settlement_hash,theoretical:e.theoretical,last_hash_rate_effective:e.last_hash_rate_effective,last_settlement_profit_btc:e.last_settlement_profit_btc,last_settlement_profit_fb:e.last_settlement_profit_fb,last_settlement_date:e.last_settlement_date,update_time:e.update_time,link:e.link}));c(t)}else c([])},[l]),n.useEffect(()=>{j([{dataIndex:"serialNumber",key:"serialNumber",width:25,render:(t,e)=>{const{link:s}=e;return s.includes("antpool")?a.jsx(D,{style:{color:"green",fontSize:16}}):s.includes("f2pool")?a.jsx(B,{style:{color:"orange",fontSize:16}}):a.jsx("span",{children:e.serialNumber})}},{title:"场地",dataIndex:"venue_name",key:"venue_name",width:200,render:t=>{const e=t==="Arct-HF01-J XP-AR-US"||t==="ARCT Technologies-HF02-AR-US";return a.jsx(d,{title:t,placement:"top",overlayInnerStyle:{color:"white"},style:{color:"white"},children:a.jsxs("div",{style:{width:"100%",overflow:"hidden",color:e?"red":"#333",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:e?"bold":"normal"},children:[t,e&&a.jsx(o,{color:"red",style:{marginLeft:2},children:"补充"})]})})}},{title:"子账户",dataIndex:"pool_name",key:"pool_name",responsive:["xs","sm","md"],width:"10%",render:t=>a.jsx(d,{title:t,placement:"top",overlayInnerStyle:{color:"white"},style:{color:"white"},children:a.jsx("div",{style:{width:"100%",overflow:"hidden",color:"#333",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t})})},{title:"实时算力",dataIndex:"current_hash",key:"current_hash",render:t=>{const e=t.split(" ");return a.jsxs("span",{children:[e[0]," ",a.jsx("span",{className:"text-sm text-gray-500",children:e[1]})]})}},{title:"理论算力",width:"10%",dataIndex:"theoretical",key:"theoretical",render:t=>{const e=t.split(" ");return e[0]=="0.00"?"--":a.jsxs("span",{children:[e[0]," ",a.jsx("span",{className:"text-sm text-gray-500",children:e[1]})]})},sorter:(t,e)=>{const s=parseFloat(t.theoretical.split(" ")[0]),r=parseFloat(e.theoretical.split(" ")[0]);return s-r}},{title:"24h算力",dataIndex:"last_hash",key:"last_hash",render:t=>{const e=t.split(" ");return a.jsxs("span",{children:[e[0]," ",a.jsx("span",{className:"text-sm text-gray-500",children:e[1]})]})},sorter:(t,e)=>{const s=parseFloat(t.last_hash.split(" ")[0]),r=parseFloat(e.last_hash.split(" ")[0]);return s-r}},{title:"在线/离线",key:"status",width:"12%",render:(t,e)=>a.jsxs("span",{children:[a.jsx(o,{color:"success","v-if":e.online!=0,children:e.online}),a.jsx(o,{color:"error","v-if":e.offline!="0",children:e.offline})]})},{title:()=>a.jsx(d,{title:"昨日算力达成率",children:a.jsx("span",{style:{display:"inline-block",maxWidth:100,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:"达成率"})}),dataIndex:"last_hash_rate_effective",key:"last_hash_rate_effective",width:"5%",render:t=>{const e=parseFloat(t.replace("%",""));return a.jsx("span",{style:{color:e<90?"red":"green"},children:t})},sorter:(t,e)=>{const s=parseFloat(t.last_hash_rate_effective.replace("%","")),r=parseFloat(e.last_hash_rate_effective.replace("%",""));return s-r}},{title:"结算算力",width:"10%",dataIndex:"last_settlement_hash",key:"last_settlement_hash",render:t=>{const e=t.split(" ");return a.jsxs("span",{children:[e[0]," ",a.jsx("span",{className:"text-sm text-gray-500",children:e[1]})]})},sorter:(t,e)=>{const s=parseFloat(t.last_settlement_hash.split(" ")[0]),r=parseFloat(e.last_settlement_hash.split(" ")[0]);return s-r}},{title:"结算BTC",dataIndex:"last_settlement_profit_btc",key:"last_settlement_profit_btc",render:t=>a.jsx("span",{children:a.jsx(o,{color:"#f50",style:{padding:0},children:t})})},{title:"结算时间",dataIndex:"last_settlement_date",key:"last_settlement_date",align:"right",render:t=>{const e=new Date(t),s=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return`${s}-${r}`}},{title:"刷新时间",dataIndex:"update_time",key:"update_time",width:80,align:"right",render:t=>{const e=new Date(t),s=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0"),T=e.getSeconds().toString().padStart(2,"0");return`${s}:${r}:${T}`}},{title:"链接",dataIndex:"link",key:"link",width:50,render:t=>a.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:{color:"#252F4A"},title:t,children:a.jsx(W,{style:{marginLeft:8,fontSize:"32px"}})})}])},[]);const b=t=>{S(t.target.value)};if(u)return a.jsx(x,{tip:"加载中..."});const k=()=>new Promise(()=>{}),I=()=>new Promise(()=>{}),C=()=>{$(m)},F=t=>{y(t.target.value),localStorage.setItem(`${g}_poolCategory`,t.target.value)},m=w.filter(t=>Object.values(t).some(e=>String(e).toLowerCase().includes(_.toLowerCase()))).sort((t,e)=>{const s=t.venue_name.toLowerCase(),r=e.venue_name.toLowerCase();return s<r?-1:s>r?1:0});return a.jsxs("div",{style:{padding:"20px 0px"},className:"longdataTable",children:[a.jsxs(H,{gutter:[16,16],justify:"space-between",align:"middle",children:[a.jsx(f,{xs:24,sm:24,md:12,children:a.jsxs(h.Group,{className:"filterRadio",onChange:F,value:p,children:[a.jsx(h.Button,{value:"主矿池",children:"主矿池"}),a.jsx(h.Button,{value:"备用矿池",children:"备用矿池"})]})}),a.jsx(f,{xs:24,sm:24,md:12,children:a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",justifyContent:"flex-end"},children:[a.jsx(z,{prefix:a.jsx(M,{}),placeholder:"搜索",value:_,onChange:b,style:{width:"200px"}}),a.jsx(O,{icon:a.jsx(U,{}),onClick:C,children:"导出"})]})})]}),u?a.jsx(x,{style:{marginTop:20}}):a.jsx(L,{tableData:m,setTableData:c,columns:v,handleDelete:k,handleSave:I})]})}export{ne as default};
