<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>运营管理系统</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
<script>
  // 监听所有资源加载错误
  window.addEventListener("error", function (event) {
    if (event.message && event.message.includes("Failed to load module script")) {
      console.warn("检测到模块加载失败，自动刷新页面...");
      setTimeout(() => {
        location.reload();
      }, 1000); // 延迟 1s 避免死循环
    }
  });

  // 兜底：全局未捕获错误
  window.onerror = function (message, source, lineno, colno, error) {
    if (String(message).includes("Failed to load module script")) {
      console.warn("onerror 捕获模块加载失败，刷新页面...");
      setTimeout(() => {
        location.reload();
      }, 1000);
    }
  };
</script>
